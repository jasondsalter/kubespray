https://rhtapps.redhat.com/trainingbookshelf/ebook/do280-4.14



To append a command to the end of a yaml file
    oc get limittange -n "name" -o yaml >>template.yaml


RBAC
    Cluster Admin
    self provisioner - can create a project - team lead
    developer - can modify within a project

oc explain 

watch oc get deployments,pods

view all IPs on the Node
    oc debug node/master01 -- chroot /host ip addr

Compare difference between two files
diff ~/DO280/labs/non-http-multus/network-attachment-definition.yaml ~/DO280/solutions/non-http-multus/network-attachment-definition.yaml

Deployment.yml
--> api server ---> etcd ---Controller --> Scheduler
**********************************************************************
Create a deployment
    oc create deployment web --image nginx --port 8080 --replicas 2

Modify a deployment
    oc set resources

Scale a Deployment
    oc scale deployment xxxx --replicas=10

View a deployment
    oc describle deployment

View SA in a Project
    oc get sa

View Roles in a project
    oc get rolebindings



************************************************************************
Node specific
    oc describe node/master01
    oc adm top node
********************************************************************************
View event logs
    oc get ev 
********************************************************************************
TLS
    oc create route "name" --service "name" --hostname "url"

Network Policies
    Allow you define ingress and egress communication
    usually done by using labels
    start with default deny to block all, then add specific policies (


Openshift    Service-ca controller
K8s          CertManager for k8s  
    oc annotate 

********************************************************************************
Exposing Non-HTTP Services with Metal LB
The MetalLB Component

MetalLB is a load balancer component that provides a load balancing service for clusters that do not run on a cloud provider, such as a bare metal cluster, or clusters that run on hypervisors. MetalLB operates in two modes: layer 2 and Border Gateway Protocol (BGP), with different properties and requirements. You must plan the use of MetalLB to consider your requirements and your network design.
MetalLB is an operator that you can install with the Operator Lifecycle Manager. After installing the operator, you must configure MetalLB through its custom resource definitions. In most situations, you must provide MetalLB with an IP address range.

********************************************************************************

Network Attachment Definition
ovn-kubernetes - how pods get their interfaces
add a second Nic
https://www.cncf.io/blog/2017/05/23/cncf-hosts-container-networking-interface-cni/


************************************************************************
Chapter 6

Resource limits - Maximum Resources
Resource Requests -Workloads can decalre there minimum required resources
Example
        OS    oc set resources deployment/nginx --limits=cpu=200m,memory=512Mi --requests=cpu=100m,memory=256Mi   
        k8s   kubectl set resources deployment/nginx --limits=cpu=200m,memory=512Mi --requests=cpu=100m,memory=256Mi

Resource Quotas
    Set a hard quora called one-cpu
      oc create quota one-cpu --hard=requests.cpu=1
      oc get quota one-cpu -o yaml

      oc explain ResourceQuota

Create Limit Ranges for project level quotas - do prior to making deployments
    limit
    request

Projects / Namespace
    oc explain project
    oc get project "name" -o yaml

Create a project Template - Ensures all new projects and created in a certain way
    oc adm create-bootstrap-project-template -o yaml > prt.yaml
    edit template and add in new options eg argom network policies, 
    once edited -
        to use in a specific single use        oc create -f template -n "name"
   
change the global cluster project configuration.
                oc edit projects.config.openshift.io cluster
                update                         spec:
                                                  projectRequestTemplate:
                                                    name: project-request

oc get clusterrole self-provisioners -o yaml
oc get clusterrolebinding self-provisioners -o yaml


************************************************************************

RedHat Openshift Kubernetes Engine (OKE) - in dev and prod?
https://www.devopsschool.com/blog/openshift-step-by-step-guide-to-install-and-set-up-okd-openshift-kubernetes-distribution/
https://github.com/okd-project/okd/releases
https://okd.io/docs/project/crc
https://developers.redhat.com/products/openshift-local/overview


RH Openshift Local - DEV
oke for test


************************************************************************

if you use the vi editor, then you can use the following procedure to move a block of text:

    Move to the beginning of the block.
        Press V to enter visual line mode. This mode selects entire lines for manipulation.
    Move to the end of the block. The editor highlights the selected lines.
        Press d to delete the lines and to store them in a register for later use.
    Move to the destination.
        Press P to insert the lines that are stored in the register.
You can also press dd to delete entire lines, and press . to repeat the operation.

************************************************************************
Chapter 7 - Operators
    Extend the Kubernetes API Extensions - Allows users to use custom resouces

    Cluster Operators   Cluster operators provide the platform services of OpenShift, such as the web console and the OAuth server.
                        oc get co
    Add-On Operators    OpenShift includes the Operator Lifecycle Manager (OLM). The OLM helps users to install and update operators in a cluster.
    Other Operators     custom
    Operator Lifecycle  Manages Add-Ons 
    Manager        

    Creates custom resources
            oc get packagemanifest
            oc describe packagemanifest 

    View Catalog Sources (for other mirrors)
            oc get catalogsource -n openshift-marketplace

    View avaailable operators
            oc get packagemanifests


    To install manaually
            oc create ns "name"
            oc create operator-group 
            oc create subscription







DeamonSet - Runs 1 pod per node as needs specific 1-2-1 node access

























